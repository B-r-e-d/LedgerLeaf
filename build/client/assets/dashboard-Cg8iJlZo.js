import{r as h,j as e,u as S}from"./utils-BxSkdMMe.js";import{C as g,a as y,b as j,c as C,H as E,S as R,d as k,e as D,f as P,g as L}from"./Header-FKyU_VHQ.js";import{u as w}from"./preferences-ztP-82l4.js";import"./index-DUQ9hqCk.js";const O="modulepreload",V=function(n){return"/"+n},N={},A=function(r,a,i){let u=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),o=(t==null?void 0:t.nonce)||(t==null?void 0:t.getAttribute("nonce"));u=Promise.allSettled(a.map(c=>{if(c=V(c),c in N)return;N[c]=!0;const d=c.endsWith(".css"),x=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${x}`))return;const l=document.createElement("link");if(l.rel=d?"stylesheet":O,d||(l.as="script"),l.crossOrigin="",l.href=c,o&&l.setAttribute("nonce",o),document.head.appendChild(l),d)return new Promise((b,p)=>{l.addEventListener("load",b),l.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function f(t){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=t,window.dispatchEvent(o),!o.defaultPrevented)throw t}return u.then(t=>{for(const o of t||[])o.status==="rejected"&&f(o.reason);return r().catch(f)})};function v(n){const{type:r,data:a,options:i,className:u}=n,f=h.useRef(null),t=h.useRef(null);return h.useEffect(()=>{let o=!0;async function c(){var p;const d=await A(()=>import("./auto-CSZ8dA-i.js"),[]);if(!o)return;const x=d.default,l=(p=f.current)==null?void 0:p.getContext("2d");if(!l)return;const b=Object.assign({maintainAspectRatio:!1},i);t.current=new x(l,{type:r,data:a,options:b})}return c(),()=>{o=!1,t.current&&(t.current.destroy(),t.current=null)}},[r,a,i]),e.jsx("canvas",{ref:f,className:u,role:"img","aria-label":"chart"})}function $(){const n=[],r=new Date;for(let a=5;a>=0;a--){const u=new Date(r.getFullYear(),r.getMonth()-a,1).toLocaleString("en-US",{month:"short",year:"2-digit"});n.push(u)}return n}function _(){const{rates:n}=S(),{selectedCurrency:r}=w(),a=[{name:"Netflix",amount:649},{name:"Spotify",amount:119},{name:"Adobe CC",amount:1599},{name:"GitHub",amount:400},{name:"Google One",amount:650}],i=h.useMemo(()=>{if(!n)return 1;const s=n.INR,m=n[r]||1;return!s||!m?1:m/s},[n,r]),u=h.useCallback(s=>{try{return new Intl.NumberFormat("en-US",{style:"currency",currency:r,maximumFractionDigits:0}).format(s)}catch{return`${r} ${s}`}},[r]),f=a.map(s=>s.name),t=a.map(s=>s.amount*i),o={labels:f,datasets:[{label:"Monthly Expense",data:t,backgroundColor:["#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6"],hoverOffset:8}]},c={plugins:{legend:{position:"bottom",labels:{boxWidth:16,boxHeight:16}},tooltip:{callbacks:{label:s=>{const m=Number(s.parsed);return`${s.label}: ${u(m)}`}}}}},d=$(),l=[4200,4380,4120,4590,4720,4610].map(s=>s*i),b={labels:d,datasets:[{label:"Total per month",data:l,backgroundColor:"#3b82f6",borderRadius:6,barPercentage:.6,categoryPercentage:.6}]},p={plugins:{legend:{display:!1},tooltip:{callbacks:{label:s=>{const m=Number(s.parsed.y);return` ${u(m)}`}}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(148, 163, 184, 0.2)"},ticks:{callback:s=>{const m=Number(s);return u(m)}}},x:{grid:{display:!1}}}};return e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs(g,{className:"h-[380px]",children:[e.jsx(y,{children:e.jsx(j,{children:"Monthly expenses by subscription"})}),e.jsx(C,{className:"h-[300px]",children:e.jsx(v,{type:"pie",data:o,options:c,className:"h-full w-full"})})]}),e.jsxs(g,{className:"h-[380px]",children:[e.jsx(y,{children:e.jsx(j,{children:"Total cost per month (last 6 months)"})}),e.jsx(C,{className:"h-[300px]",children:e.jsx(v,{type:"bar",data:b,options:p,className:"h-full w-full"})})]})]})}const F=()=>[{title:"Dashboard | Subscriptions"},{name:"description",content:"Visualize subscription spending and monthly totals."}];function M(){const{rates:n}=S(),{selectedCurrency:r,setSelectedCurrency:a}=w();return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(E,{}),e.jsxs("main",{className:"container mx-auto py-6 px-3 sm:px-4 lg:px-6",children:[e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-foreground mb-1",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Visualize subscription spending and monthly totals"})]}),n?e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(R,{value:r,onValueChange:a,children:[e.jsx(k,{className:"w-[96px]",children:e.jsx(D,{placeholder:"Currency"})}),e.jsx(P,{children:Object.keys(n).map(i=>e.jsx(L,{value:i,children:i},i))})]})}):null]}),e.jsx(_,{})]})]})}export{M as default,F as meta};
